-*- mode: org; -*-

* Gameplay

** New weapons & items
*** Machine gun
	 Rapid-fire weapon but takes longer to kill ships. Go against the
	 one shot/one kill principle of the current gameplay. Could be used
	 for other bonuses like slowdown shots. The player launch burst of
	 tiny projectiles and the more the enemy get shot, the slower he
	 gets.

*** Portable black hole
	 Gravity affects bullets and ships.
	 Neat graphical effect required!

*** DONE Shield
		 CLOSED: [2011-08-03 Wed 14:33]
	 Deflect bullets. Protect from offensive bonuses.

*** DONE EMP
		 CLOSED: [2011-08-03 Wed 14:33]
	 Deactivate near mines and trackers with an electromagnetic blast.
	 Enemies in the affected area could become drunk.

*** DONE Tracker
		 CLOSED: [2011-07-22 Fri 16:15]
	 Mercilessly follow a designated target.

*** DONE Invisible hull
		 CLOSED: [2011-08-03 Wed 14:33]
	 Stay invisible while you do not fire or use any other bonus.

*** Big head mode
	 Easier to shoot at, harder to slip between planets but kills on
	 contact.

*** Paintball mode
	 Spray other ships with your colors! Rating 2 and up.

*** Mirror image
	 Copy of the ship that mirror the player, but turn in opposite
	 directions.  Fires phony bullets, disappear when colliding
	 something (different explosion visual).

** Environment
*** Asteroids
		Blob-like asteroids slowly drifting across the map.
		Breaks into smaller asteroids when hit.

*** Base
		Usable as a spawn area when playing with teams. Could take the
    form of a big planet riddled with tunnels or a more mechanical
    mothership.

		Could be protected with sentries targetting invasive enemy players
    (this game lacks laser!). At the start of the round, bases are
    unprotected and players must earn sentries. We could use bonuses
    as a ressource : players bring them to a dedicated drop zone
    inside the base to progressively improve the base defense.

** Other game modes
*** Team deathmatch

*** King of the hill
    Highlight one area on the map, every second alive in the area
    gives one point. Change area after some time.

*** Courrier / Team courrier
    Pick item at A, bring at B, score. Capture the flag but without
    bases or carefully designed levels.

*** The man with the golden ship
    First player to grab the golden bonus is granted unique powers,
    others have to shoot him down to grab the bonus and rack up the
    kills.

*** Triple team
		Three teams, each one having a prey team and a hunter team.
		The team which kills the most preys wins.
		A ship can only be killed by a member of its hunter team.

*** Death race
	 All ships spawn at the start line, first to finish wins.
	 The map is tailored for the race, with planets on either side (or
	 asteroids fields), and some obstacles on it.
	 Bullets are disabled, as are ship collisions (maybe bump into
	 obstacles and ships).
	 Boosts are mandatory.

** Statistics
*** Session statistics
		- Kills
		- Deaths
		- Score = K - D, compel to avoid kamikazing.

*** Persistent statistics (with account)
		- Total playtime.
		- Favorite bonuses.
		- Score progression tracking.

*** Achievements (everybody loves achievements!)
		- National day : Explode X times.
		- Rube Goldberg from outer space : Create a chain explosion of X mines.
		- Anticipating the uprising : Kill X bots.
		- Seasoned space explorer : Play for X hours.
		- An apple a day : Kill every type of bot.
		- Heavy drinker : Be drunk for X minutes.
		- So Roswell : Crash on planets X times.
		- Hope nobody saw that : Shot yourself.
		- Rogue leader : Be at the top of the scoreboard X times.
		...


* Interface
** Web interface for game creation.
*** TODO Sanitize input
		- Unique game id.
		- Out of range values.

*** TODO More info in game list.
		- Max players allowed.
		- Ping.
    - Password-protected or not.
		- Game mode.

*** TODO More options in game creation.
		- Password.
    - Number of players allowed.
	  - Game mode.

** Game interface
*** TODO Chat
		Let players talk.
		Display major events (death, crash, new player, ...).

** DONE Let the player move the camera around the battlefield after he dies
	 CLOSED: [2011-07-22 Fri 16:28]


* Graphics
** DONE Current bonus visual clue.
	 CLOSED: [2011-07-22 Fri 16:24]
	Bonus dragging behind the ship. The rope can be cut.

** Leave some ephemeral traces of fight on planets.
   Ships and bullets splatters their colors. Ã€ la paintball.


* Core

** Use an event model where needed.
   Ships could emit 'fire', 'death', 'explosion' events, bonus
   can register them and act safely upon it instead of relying on
   polling the ship state.

   Bonus too could benefit by emitting the 'effect wears off' event
   catched by ships instead of managing the bonusTimeouts explicitly.

   While this is a nice pattern, we need to make sure calling
   listeners is synchronous. If that must be done, use our own
   synchronous EventEmitter.

** DONE Factorize gravity from planet computations
	 CLOSED: [2011-07-13 Wed 12:20]
   Consider only surrounding planets, wrt the torus.

** Expire deserted games

** DONE Tune collisions.
	 CLOSED: [2011-07-22 Fri 16:25]
   - Properly handle more than circle on circle collisions. Ideally,
     we should compare hitboxes instead of simple hitradii.
   - Immobile objects need not to be reinserted in the grid (planets).
   - Don't check collisions between objects that can't collide gameplay-wise.

** Prevent objects from spawning onto each other.

** DONE Change planet count to a percentage value relative to map size.
   CLOSED: [2011-08-03 Wed 15:28]
   Could specify between 30-70% planet fill. Avoid locks when trying
   to fit 50 planets into a 500*500 map.

** DONE Refactor client clode
	 CLOSED: [2011-07-22 Fri 16:25]
   What a mess.

** TODO Rework client drawing.
   Find out why Core2 with puny graphic chipset can handle the client fullscreen
   when beefier hardware can't.

** Send full game update to reconnecting / out of sync clients.
   Client should clean everything and start anew from this update.
** DONE Use sprites for all bonuses
	 CLOSED: [2011-08-03 Wed 14:37]
** Visual clue for number of mines in bonus
** TODO Use composition instead of inheritance where it makes sense
